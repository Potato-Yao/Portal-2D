<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="Shortcut Icon" href="../assets/ico/exit.png" type="image/x-icon" />
    <title>BITVentures</title>
    <link rel="stylesheet" href="../assets/style/start.css">
    <link rel="stylesheet" href="../assets/style/members.css">
</head>
<body>
    <div class="container">
        <header class="page-header">
            <img src="../assets/imgs/team_logo.png" alt="Team Logo" class="header-logo">
            <nav class="main-nav">
                <ul>
                    <li><a href="../index.html" id="home">返回主页</a></li>
                    <!-- <li><a href="#" class="active" id="members-intro">成员介绍</a></li> -->
                </ul>
            </nav>
        </header>

        <script type="text/javascript" src="../script/utils/Store.js"></script>
        <script type="text/javascript" src="../script/Managers/AchievementManager.js"></script>
        <script type="text/javascript" src="../script/utils/BackgroundChanger.js"></script>
        
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                try {
                    // 尝试从localStorage读取保存的背景图片路径
                    const savedBackground = Store.get('backgroundImage');
                    if (savedBackground) {
                        // 如果有保存的背景图片，直接设置
                        console.log('Loading saved background image:', savedBackground);
                        document.body.style.backgroundImage = `url('../assets/imgs/${savedBackground}')`;
                        document.body.style.backgroundSize = 'cover';
                        document.body.style.backgroundPosition = 'center';
                        document.body.style.backgroundRepeat = 'no-repeat';
                    } else if (window.BackgroundChanger) {
                        // 如果没有保存的背景图片，使用BackgroundChanger设置默认背景
                        BackgroundChanger.setBackground('../assets/imgs/');
                    }
                } catch (error) {
                    console.error('Error loading background image:', error);
                    // 如果出错，使用BackgroundChanger设置默认背景
                    if (window.BackgroundChanger) {
                        BackgroundChanger.setBackground('../assets/imgs/');
                    }
                }
            });
        </script>

        <main class="member-container">
            <div class="member-gallery">
                <div class="member-card" id="czf">
                    <div class="member-avatar">
                        <img src="../assets/avatars/czf.png" alt="成员头像">
                    </div>
                    <div class="member-info">
                        <h2 class="member-name">陈卓凡</h2>
                        <p class="member-role">Coding & Design & Test</p>
                        <p class="member-bio">负责小游戏部分的设计与开发，初步视觉效果的实现，以及游戏开发过程中的测试。</p>
                    </div>
                </div>

                <div class="member-card" id="lyt">
                    <div class="member-avatar">
                        <img src="../assets/avatars/lyt.png" alt="成员头像">
                    </div>
                    <div class="member-info">
                        <h2 class="member-name">李禹潼</h2>
                        <p class="member-role">Text & Design</p>
                        <p class="member-bio">负责游戏文本、游戏流程的设计与编写，以及小游戏玩法的设计。</p>
                    </div>
                </div>

                <div class="member-card" id="phr">
                    <div class="member-avatar">
                        <img src="../assets/avatars/phr.png" alt="成员头像">
                    </div>
                    <div class="member-info">
                        <h2 class="member-name">彭浩然</h2>
                        <p class="member-role">Coding & Visual Design</p>
                        <p class="member-bio">负责视觉效果的设计与实现，以及游戏界面的设计。</p>
                    </div>
                </div>

                <div class="member-card" id="yys">
                    <div class="member-avatar">
                        <img src="../assets/avatars/yys.png" alt="成员头像">
                    </div>
                    <div class="member-info">
                        <h2 class="member-name">姚雨森</h2>
                        <p class="member-role">Coding & Framework</p>
                        <p class="member-bio">负责游戏框架的搭建、游戏的逻辑实现以及各部分的衔接。</p>
                    </div>
                </div>

                <div class="member-card" id="zn">
                    <div class="member-avatar">
                        <img src="../assets/avatars/zn.png" alt="成员头像">
                    </div>
                    <div class="member-info">
                        <h2 class="member-name">赵楠</h2>
                        <p class="member-role">Coding & Design & Document</p>
                        <p class="member-bio">负责小游戏的设计与开发，以及初步视觉效果的实现，同时负责项目文档编写以及日志记录。</p>
                    </div>
                </div>

                <div class="member-card" id="zzm">
                    <div class="member-avatar">
                        <img src="../assets/avatars/zzm.png" alt="成员头像">
                    </div>
                    <div class="member-info">
                        <h2 class="member-name">曾梓木</h2>
                        <p class="member-role">Coding & Visual Design</p>
                        <p class="member-bio">负责视觉效果的设计与实现，各界面的初步布局。</p>
                    </div>
                </div>
            </div>
        </main>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const gallery = document.querySelector('.member-gallery');
                // 鼠标滚轮控制水平滚动
                gallery.addEventListener('wheel', (e) => {
                    e.preventDefault();
                    gallery.scrollLeft += e.deltaY * 1.5; // 调整滚动速度为更舒适的1.5倍
                });

            });
        </script>

        <footer class="page-footer">
            <p>Exitless Day.</p>
        </footer>
    </div>
    <script type="text/javascript">
          // 页面加载时恢复滚动位置
          window.addEventListener('DOMContentLoaded', () => {
              // 从index页面进入时重置滚动位置
                //   if (document.referrer.includes('index.html')) {
                //       sessionStorage.removeItem('memberGalleryScrollLeft');
                //   }
              // 这段代码似乎未能生效（，于是改为了在下面监听单击 home 按钮并在离开时清除
              const savedScroll = sessionStorage.getItem('memberGalleryScrollLeft');
              if (savedScroll) {
                  const gallery = document.querySelector('.member-gallery');
                  gallery.scrollLeft = parseInt(savedScroll, 10);
              }
          });
          document.querySelector("#home").addEventListener("click", () => {
                sessionStorage.removeItem('memberGalleryScrollLeft');
          });
          const eventListener = (tag) => {
              document.querySelector("#" + tag).addEventListener("click", () => {
                  const gallery = document.querySelector('.member-gallery');
                  sessionStorage.setItem('memberGalleryScrollLeft', gallery.scrollLeft);
                  window.location.href = `./intro/${tag}.html`;
              });
          };
          eventListener("czf");
          eventListener("lyt");
          eventListener("phr");
          eventListener("yys");
          eventListener("zn");
          eventListener("zzm");
      </script>
</body>
</html>
